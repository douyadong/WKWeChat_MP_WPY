<!--
    @页面名称：二手房列表页面
    @作者：赵华刚 (zhaohuagang@lifang.com)
    @业务逻辑说明：
        1.
        2.        
-->
<template lang="wxml">
    <view>
       <repeat for="{{ houseList }}" key="index" index="index" item="item">
            <esf :item="item"></esf>
        </repeat>
    </view>
</template>

<script>
    import wepy from "wepy" ;
    /*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    载入组件资源
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
    import Esf from "../../components/esf" ;
    /*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    载入工具资源
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
    import Trace from "../../mixins/trace" ;  //大数据埋点 api
    /*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    页面逻辑
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
    export default class List extends wepy.page {
        components = {            
            esf : Esf
        } ; 
        data = {
            houseList : [] ,
            pageParams : {} ,
            trace : new Trace
        } ;
        onLoad(options) {
            /*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
            将页面query参数值存放到data下的pageParams下
            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
            this.pageParams = options ;            
            /*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
            根据页面参数type来决定页面navigatorTitle写什么
            1. type=onsale : 小区在售房源
            2. type=similar : 相似房源
            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
            let pageTitle ;
            let pageName = "" ; 
            let pageParam = {} ;
            switch(this.pageParams.type) {

                case "onsale" : 
                pageTitle = "小区在售房源" ;
                pageName = "1216" ;
                pageParam = { "estate_id" : this.pageParams.estateId } ;
                break ;

                case "similar" : 
                pageTitle = "相似房源" ;
                pageName = "1217" ;                
                break ;

                default :
                pageTitle = "房源列表" ;                
                break ;
            }
            wx.setNavigationBarTitle({
                "title" : pageTitle
            }) ;
            /*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
            页面埋点
            -----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
            this.trace.pv({ "pageName" : pageName , "pageParam" : pageParam }) ;
        } ;
        onShow() {

        } ;
        onShareAppMessage() {
            return { "title" : "买房就找悟空找房" }
        }
    }
</script>

<style lang="less">
    
</style>